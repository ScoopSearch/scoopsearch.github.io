(this.webpackJsonpscoopsearch=this.webpackJsonpscoopsearch||[]).push([[0],{64:function(e,t,a){e.exports=a(82)},69:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n,r,i,o,c,l,s,u,h,m=a(1),p=a.n(m),f=a(21),b=a.n(f),d=a(6),g=a(8),y=a(13),E=a(12),O=(a(69),a(25)),C=a(14),v=a(35),j=a.n(v),S=a(47),P=a(89),k=a(90),R=a(58),A=a(91),N=a(95),w=a(59),x=a(10),T=a(11),_=(a(36),a(7)),M=(n=Object(_.JsonObject)("BucketsResultsJson"),r=Object(_.JsonProperty)("@odata.count",Number),i=Object(_.JsonProperty)("@search.facets"),n((h=u=function(){function e(){Object(d.a)(this,e),Object(x.a)(this,"count",l,this),Object(x.a)(this,"results",s,this)}return Object(g.a)(e,null,[{key:"Create",value:function(t){return e.jsonConvert.deserializeObject(t,e)}}]),e}(),u.jsonConvert=new _.JsonConvert,c=h,l=Object(T.a)(c.prototype,"count",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=Object(T.a)(c.prototype,"results",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=c))||o),D=function e(){Object(d.a)(this,e)};D.extractPathFromUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return e.split("/").slice(-2).join(t)};var B,I,U=D,H=a(94),J=a(87),z=a(48),L=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.official;return p.a.createElement(H.a,{placement:"auto",delay:250,overlay:p.a.createElement(J.a,{id:"tooltip"},e?"Official bucket":"Community bucket")},e?p.a.createElement(z.b,{className:"ml-1 faIconVerticalAlign",color:"#2E86C1"}):p.a.createElement(z.a,{className:"ml-1 faIconVerticalAlign",color:"#CCCCCC"}))}}]),a}(m.PureComponent),F=a(49),q=a(88);!function(e){e[e.Applications=0]="Applications",e[e.Buckets=1]="Buckets"}(I||(I={}));var Q,K,V,Z,W,G,Y,$,X,ee,te,ae,ne,re,ie,oe,ce,le,se,ue,he,me,pe,fe,be,de,ge,ye,Ee,Oe,Ce,ve,je,Se,Pe,ke,Re,Ae,Ne,we,xe,Te,_e,Me,De,Be,Ie,Ue,He,Je,ze,Le,Fe,qe,Qe=(B={},Object(F.a)(B,I.Applications,"applications"),Object(F.a)(B,I.Buckets,"buckets"),B),Ke=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props,t=e.searching,a=e.resultsCount,n=e.query,r=e.type,i=Qe[r];if(t)return p.a.createElement("span",null,p.a.createElement("span",null,"Searching for matching ",i,"...")," ",p.a.createElement(q.a,{animation:"border",size:"sm",variant:"secondary"}));var o=p.a.createElement("span",null);return n&&(o=p.a.createElement("span",null," ","for '",p.a.createElement("strong",null,n),"'")),a?p.a.createElement("span",null,"Found ",a," ",i,o,"."):p.a.createElement("span",null,"No result found",o,".")}}]),a}(m.PureComponent),Ve=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).abortController=new AbortController,n.sortModes=["Default","Name","Manifests"],n.handleSortChange=function(e){var t=n.state.results,a=e.target.selectedIndex;n.setState({sortIndex:a,results:n.sortResults(t,a)})},n.state={searching:!1,sortIndex:0,results:[]},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(j.a.mark((function e(){var t,a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.sortIndex,this.setState({searching:!0,results:[]}),e.next=4,this.fetchDataAsync(this.abortController.signal,!0);case 4:return a=e.sent,e.next=7,this.fetchDataAsync(this.abortController.signal,!1);case 7:n=e.sent,r=a.results["Metadata/Repository"].map((function(e){return{bucket:e.value,manifests:e.count,official:!0}})).concat(n.results["Metadata/Repository"].map((function(e){return{bucket:e.value,manifests:e.count,official:!1}}))),r=this.sortResults(r,t),this.setState({searching:!1,results:r});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"fetchDataAsync",value:function(){var e=Object(S.a)(j.a.mark((function e(t,a){var n,r,i,o,c,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_AZURESEARCH_KEY:"DC6D2BBE65FC7313F2C52BBD2B0286ED",REACT_APP_AZURESEARCH_URL:"https://scoopsearch.search.windows.net/indexes/apps/docs"}),r=n.REACT_APP_AZURESEARCH_URL,i=n.REACT_APP_AZURESEARCH_KEY,r){e.next=3;break}throw new Error("REACT_APP_AZURESEARCH_URL is not defined");case 3:if(i){e.next=5;break}throw new Error("REACT_APP_AZURESEARCH_KEY is not defined");case 5:return o="".concat(r,"/search?api-version=2020-06-30"),e.next=8,fetch(o,{method:"POST",body:JSON.stringify({count:!0,facets:["Metadata/Repository,count:10000"],filter:"Metadata/OfficialRepositoryNumber eq ".concat(a?"1":"0"),top:0}),headers:{"api-key":i,"Content-Type":"application/json"},signal:t});case 8:return c=e.sent,e.next=11,c.json();case 11:return l=e.sent,e.abrupt("return",M.Create(l));case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sortResults",value:function(e,t){switch(t){case 0:return e.sort((function(e,t){return e.official===t.official?e.bucket.localeCompare(t.bucket):e.official<t.official?1:-1}));case 1:return e.sort((function(e,t){return e.bucket.localeCompare(t.bucket)}));case 2:return e.sort((function(e,t){return e.manifests===t.manifests?0:e.manifests<t.manifests?1:-1}));default:throw new Error("Unexpected sort")}}},{key:"render",value:function(){var e=this.state,t=e.results,a=e.searching;return p.a.createElement(p.a.Fragment,null,p.a.createElement(P.a,{className:"mt-5 mb-5"},p.a.createElement(k.a,null,p.a.createElement(R.a,{className:"my-auto"},p.a.createElement(Ke,{resultsCount:t.length,searching:a,type:I.Buckets})),p.a.createElement(R.a,{lg:3},p.a.createElement(A.a,{size:"sm"},p.a.createElement(A.a.Prepend,null,p.a.createElement(A.a.Text,null,"Sort by")),p.a.createElement(N.a.Control,{as:"select",size:"sm",custom:!0,onChange:this.handleSortChange},this.sortModes.map((function(e,t){return p.a.createElement("option",{key:e,value:t},e)})))))),t&&p.a.createElement(k.a,{className:"mt-2"},p.a.createElement(R.a,null,p.a.createElement(w.a,{striped:!0,bordered:!0,hover:!0},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,"Bucket"),p.a.createElement("th",null,"Manifests"))),p.a.createElement("tbody",null,t.map((function(e){return p.a.createElement("tr",{key:e.bucket},p.a.createElement("td",null,p.a.createElement(O.b,{to:{pathname:"/apps",search:encodeURIComponent('"'.concat(e.bucket,'"'))}},U.extractPathFromUrl(e.bucket))," ",p.a.createElement(L,{official:e.official})),p.a.createElement("td",null,e.manifests))}))))))))}}]),a}(m.PureComponent),Ze=a(97),We=a(96),Ge=a(18),Ye=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return p.a.createElement(Ze.a,{expand:"sm",bg:"dark",variant:"dark"},p.a.createElement(Ze.a.Brand,{as:O.b,to:"/"},"ScoopSearch"),p.a.createElement(Ze.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),p.a.createElement(Ze.a.Collapse,{id:"responsive-navbar-nav"},p.a.createElement(We.a,{className:"mr-auto"},p.a.createElement(We.a.Link,{as:O.b,to:"/apps"},"Apps"),p.a.createElement(We.a.Link,{as:O.b,to:"/buckets"},"Buckets")),p.a.createElement(We.a,null,p.a.createElement(We.a.Link,{href:"https://github.com/ScoopSearch"},p.a.createElement(Ge.d,{size:"1.2em"})))))}}]),a}(m.PureComponent),$e=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).textAreaRef=p.a.createRef(),e}return Object(g.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.content,a=e.onContentCopied;if(t){var n=this.textAreaRef.current;n&&(n.value=t,n.select(),document.execCommand("copy"),n.blur(),a())}}},{key:"render",value:function(){return p.a.createElement("textarea",{ref:this.textAreaRef,readOnly:!0,style:{position:"absolute",left:-9999}})}}]),a}(m.PureComponent),Xe=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).searchInput=void 0,n.delayBeforeSubmit=void 0,n.handleChange=function(e){var t=n.props,a=t.onQueryChange,r=t.onSubmit;a(e.target.value),n.clearDelayBeforeSubmitTimeout(),n.delayBeforeSubmit=setTimeout(r,250)},n.handleSubmit=function(e){var t=n.props.onSubmit;e.preventDefault(),n.clearDelayBeforeSubmitTimeout(),t()},n.searchInput=p.a.createRef(),n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e;null===(e=this.searchInput.current)||void 0===e||e.focus()}},{key:"componentWillUnmount",value:function(){this.clearDelayBeforeSubmitTimeout()}},{key:"clearDelayBeforeSubmitTimeout",value:function(){this.delayBeforeSubmit&&(clearTimeout(this.delayBeforeSubmit),this.delayBeforeSubmit=void 0)}},{key:"render",value:function(){var e=this.props.query;return p.a.createElement(N.a,{onSubmit:this.handleSubmit},p.a.createElement(A.a,null,p.a.createElement(A.a.Prepend,null,p.a.createElement(A.a.Text,null,p.a.createElement(Ge.e,null))),p.a.createElement(N.a.Control,{ref:this.searchInput,size:"lg",type:"text",placeholder:"Search an app",value:e,onChange:this.handleChange})))}}]),a}(m.PureComponent),et=a(99),tt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).changePage=function(t){var a=e.props,n=a.resultsCount,r=a.resultsPerPage,i=a.onPageChange,o=Math.ceil(n/r);i(Math.max(1,Math.min(t,o)))},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentPage,n=t.resultsCount,r=t.resultsPerPage;if(n>0){var i=Math.ceil(n/r);if(i>1){var o=[],c=Math.max(2,a-2),l=Math.min(i-1,a+2),s=4-(l-c),u=l-(l+s);l=Math.min(i-1,l+s);for(var h=function(t){t===a-2+u||t===a+2+s?o.push(p.a.createElement(et.a.Ellipsis,{key:t,disabled:!0})):o.push(p.a.createElement(et.a.Item,{key:t,active:t===a,onClick:function(){return e.changePage(t)}},t))},m=c=Math.max(2,c+u);m<=l;m+=1)h(m);return p.a.createElement(et.a,{size:"sm"},p.a.createElement(et.a.Prev,{key:"prev",onClick:function(){return e.changePage(a-1)}}),p.a.createElement(et.a.Item,{key:1,active:1===a,onClick:function(){return e.changePage(1)}},1),o,p.a.createElement(et.a.Item,{key:i,active:i===a,onClick:function(){return e.changePage(i)}},i),p.a.createElement(et.a.Next,{key:"next",onClick:function(){return e.changePage(a+1)}}))}}return p.a.createElement(p.a.Fragment,null)}}]),a}(m.PureComponent),at=Object(_.JsonConverter)(Q=function(){function e(){Object(d.a)(this,e)}return Object(g.a)(e,[{key:"serialize",value:function(e){throw new Error("Conversion not supported")}},{key:"deserialize",value:function(e){return new Date(e)}}]),e}())||Q,nt=(K=Object(_.JsonObject)("MetadataJson"),V=Object(_.JsonProperty)("Repository",String),Z=Object(_.JsonProperty)("OfficialRepository",Boolean),W=Object(_.JsonProperty)("RepositoryStars",Number),G=Object(_.JsonProperty)("BranchName",String,!0),Y=Object(_.JsonProperty)("FilePath",String),$=Object(_.JsonProperty)("AuthorName",String),X=Object(_.JsonProperty)("Committed",at),ee=Object(_.JsonProperty)("Sha",String),K((ae=function e(){Object(d.a)(this,e),Object(x.a)(this,"repository",ne,this),Object(x.a)(this,"repositoryOfficial",re,this),Object(x.a)(this,"stars",ie,this),Object(x.a)(this,"branchName",oe,this),Object(x.a)(this,"filePath",ce,this),Object(x.a)(this,"authorName",le,this),Object(x.a)(this,"committed",se,this),Object(x.a)(this,"sha",ue,this)},ne=Object(T.a)(ae.prototype,"repository",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),re=Object(T.a)(ae.prototype,"repositoryOfficial",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=Object(T.a)(ae.prototype,"stars",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=Object(T.a)(ae.prototype,"branchName",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ce=Object(T.a)(ae.prototype,"filePath",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),le=Object(T.a)(ae.prototype,"authorName",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),se=Object(T.a)(ae.prototype,"committed",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date}}),ue=Object(T.a)(ae.prototype,"sha",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),te=ae))||te),rt=(he=Object(_.JsonObject)("ManifestJson"),me=Object(_.JsonProperty)("Id",String),pe=Object(_.JsonProperty)("@search.score",Number),fe=Object(_.JsonProperty)("Name",String),be=Object(_.JsonProperty)("NamePartial",String),de=Object(_.JsonProperty)("NameSuffix",String),ge=Object(_.JsonProperty)("Description",String,!0),ye=Object(_.JsonProperty)("Homepage",String,!0),Ee=Object(_.JsonProperty)("License",String,!0),Oe=Object(_.JsonProperty)("Version",String,!0),Ce=Object(_.JsonProperty)("Metadata",nt),ve=Object(_.JsonProperty)("@search.highlights",_.Any,!0),he((Se=function(){function e(){Object(d.a)(this,e),Object(x.a)(this,"id",Pe,this),Object(x.a)(this,"score",ke,this),Object(x.a)(this,"name",Re,this),Object(x.a)(this,"namePartial",Ae,this),Object(x.a)(this,"nameSuffix",Ne,this),Object(x.a)(this,"description",we,this),Object(x.a)(this,"homepage",xe,this),Object(x.a)(this,"license",Te,this),Object(x.a)(this,"version",_e,this),Object(x.a)(this,"metadata",Me,this),Object(x.a)(this,"highlights",De,this)}return Object(g.a)(e,[{key:"tryGetHighlight",value:function(e,t){return this.tryGetHighlights([e],t)}},{key:"tryGetHighlights",value:function(e,t){var a=this,n=e.find((function(e){return a.highlights&&a.highlights[e]}));return n&&this.highlights?this.highlights[n]:t}},{key:"highlightedName",get:function(){return this.tryGetHighlights(["Name","NamePartial","NameSuffix"],this.name)}},{key:"highlightedLicense",get:function(){return this.tryGetHighlight("License",this.license)}},{key:"highlightedRepository",get:function(){return this.tryGetHighlight("Metadata/Repository",this.metadata.repository.replace("https://github.com/",""))}},{key:"highlightedAuthorName",get:function(){return this.tryGetHighlight("Metadata/AuthorName",this.metadata.authorName)}},{key:"highlightedDescription",get:function(){return this.tryGetHighlight("Description",this.description)}},{key:"highlightedVersion",get:function(){return this.tryGetHighlight("Version",this.version)}},{key:"favicon",get:function(){if(this.homepage){var e=document.createElement("a");return e.href=this.homepage,"".concat(e.origin,"/favicon.ico")}}}]),e}(),Pe=Object(T.a)(Se.prototype,"id",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ke=Object(T.a)(Se.prototype,"score",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Re=Object(T.a)(Se.prototype,"name",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ae=Object(T.a)(Se.prototype,"namePartial",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ne=Object(T.a)(Se.prototype,"nameSuffix",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),we=Object(T.a)(Se.prototype,"description",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),xe=Object(T.a)(Se.prototype,"homepage",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Te=Object(T.a)(Se.prototype,"license",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_e=Object(T.a)(Se.prototype,"version",[Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Me=Object(T.a)(Se.prototype,"metadata",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new nt}}),De=Object(T.a)(Se.prototype,"highlights",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),je=Se))||je),it=(Be=Object(_.JsonObject)("SearchResultsJson"),Ie=Object(_.JsonProperty)("@odata.count",Number),Ue=Object(_.JsonProperty)("value",[rt]),Be((qe=Fe=function(){function e(){Object(d.a)(this,e),Object(x.a)(this,"count",ze,this),Object(x.a)(this,"results",Le,this)}return Object(g.a)(e,null,[{key:"Create",value:function(t){return e.jsonConvert.deserializeObject(t,e)}}]),e}(),Fe.jsonConvert=new _.JsonConvert,Je=qe,ze=Object(T.a)(Je.prototype,"count",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Le=Object(T.a)(Je.prototype,"results",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Array()}}),He=Je))||He),ot=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).abortController=new AbortController,n.sortModes=[{DisplayName:"Best match",OrderBy:["search.score() desc","Metadata/OfficialRepositoryNumber desc","NameSortable asc"]},{DisplayName:"Name",OrderBy:["NameSortable asc","Metadata/OfficialRepositoryNumber desc","Metadata/RepositoryStars desc","Metadata/Committed desc"]},{DisplayName:"Newest",OrderBy:["Metadata/Committed desc","Metadata/OfficialRepositoryNumber desc","Metadata/RepositoryStars desc"]}],n.handleSortChange=function(e){(0,n.props.onSortIndexChange)(e.target.selectedIndex)},n.handleSearchOfficialOnlyChange=function(e){(0,n.props.onSearchOfficialOnlyChange)(e.target.checked)},n.state={resultsCount:0,searching:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.query;this.fetchDataAsync(this.abortController.signal,e)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.query,r=a.page,i=a.sortIndex,o=a.searchOfficialOnly;n===e.query&&r===e.page&&i===e.sortIndex&&o===e.searchOfficialOnly||(this.abortController.abort(),this.abortController=new AbortController,this.fetchDataAsync(this.abortController.signal,n))}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"fetchDataAsync",value:function(e,t){var a=this;this.setState({searching:!0});var n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_AZURESEARCH_KEY:"DC6D2BBE65FC7313F2C52BBD2B0286ED",REACT_APP_AZURESEARCH_URL:"https://scoopsearch.search.windows.net/indexes/apps/docs"}),r=n.REACT_APP_AZURESEARCH_URL,i=n.REACT_APP_AZURESEARCH_KEY;if(!r)throw new Error("REACT_APP_AZURESEARCH_URL is not defined");if(!i)throw new Error("REACT_APP_AZURESEARCH_KEY is not defined");var o="".concat(r,"/search?api-version=2020-06-30"),c=this.props,l=c.sortIndex,s=c.searchOfficialOnly,u=c.page,h=c.resultsPerPage,m=c.onResultsChange;fetch(o,{method:"POST",body:JSON.stringify({count:!0,search:t.trim(),searchMode:"all",filter:s?"Metadata/OfficialRepositoryNumber eq 1":"",orderby:this.sortModes[l].OrderBy.join(", "),skip:(u-1)*h,top:h,select:["Id","Name","NamePartial","NameSuffix","Description","Homepage","License","Version","Metadata/Repository","Metadata/FilePath","Metadata/AuthorName","Metadata/OfficialRepository","Metadata/RepositoryStars","Metadata/Committed","Metadata/Sha"].join(","),highlight:["Name","NamePartial","NameSuffix","Description","Version","License","Metadata/Repository","Metadata/AuthorName"].join(","),highlightPreTag:"<mark>",highlightPostTag:"</mark>"}),headers:{"api-key":i,"Content-Type":"application/json"},signal:e}).then((function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()})).then((function(e){var t=it.Create(e);a.setState({searching:!1,resultsCount:t.count}),m(t)})).catch((function(e){"AbortError"!==e.name&&(a.setState({searching:!1,resultsCount:0}),m(void 0))}))}},{key:"render",value:function(){var e=this.props,t=e.query,a=e.sortIndex,n=e.searchOfficialOnly,r=this.state,i=r.resultsCount,o=r.searching;return p.a.createElement(N.a,null,p.a.createElement(k.a,null,p.a.createElement(R.a,{className:"my-auto"},p.a.createElement(Ke,{query:t,resultsCount:i,searching:o,type:I.Applications})),p.a.createElement(R.a,{lg:3,className:"my-auto text-right"},p.a.createElement(N.a.Check,{type:"switch",id:"only-official-buckets"},p.a.createElement(N.a.Check.Input,{checked:n,onChange:this.handleSearchOfficialOnlyChange}),p.a.createElement(N.a.Check.Label,null,p.a.createElement("span",{style:{display:"flex",alignItems:"center"}},"Search only",p.a.createElement(L,{official:!0}))))),p.a.createElement(R.a,{lg:3},p.a.createElement(A.a,{size:"sm"},p.a.createElement(A.a.Prepend,null,p.a.createElement(A.a.Text,null,"Sort by")),p.a.createElement(N.a.Control,{as:"select",size:"sm",custom:!0,value:a,onChange:this.handleSortChange},this.sortModes.map((function(e,t){return p.a.createElement("option",{key:e.DisplayName,value:t},e.DisplayName)})))))))}}]),a}(m.PureComponent),ct=a(51),lt=a.n(ct),st=a(62),ut=a.n(st),ht=a(98),mt=a(63),pt=a(92),ft=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleClick=function(){(0,n.props.onClick)(),n.setState({copied:!0})},n.state={copied:!1},n}return Object(g.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state.copied;n&&n!==t.copied&&setTimeout((function(){a.setState({copied:!1})}),1500)}},{key:"render",value:function(){var e=this.props.className,t=this.state.copied;return p.a.createElement(pt.a,{className:e,variant:"secondary",onClick:this.handleClick,disabled:t},t?p.a.createElement(Ge.a,{className:"faIconVerticalAlign"}):p.a.createElement(Ge.b,{className:"faIconVerticalAlign"}))}}]),a}(m.PureComponent),bt=a(93),dt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.stars;return p.a.createElement(bt.a,{variant:"secondary",className:"ml-1 starsBadge"},p.a.createElement("span",null,e)," ",p.a.createElement(Ge.f,null))}}]),a}(m.PureComponent);lt.a.extend(ut.a);var gt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCopyToClipboard=function(t){(0,e.props.onCopyToClipbard)(t)},e.displayHighlight=function(e){return e&&p.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.result,a=t.id,n=(t.score,t.name),r=t.favicon,i=t.highlightedName,o=t.highlightedDescription,c=t.highlightedLicense,l=t.highlightedRepository,s=t.highlightedAuthorName,u=t.highlightedVersion,h=t.metadata,m=t.homepage;return p.a.createElement(ht.a,{key:a,className:"mb-2"},p.a.createElement(ht.a.Header,null,r&&p.a.createElement(mt.Img,{className:"mr-2",src:r,width:20,height:20}),p.a.createElement("strong",null,this.displayHighlight(i))," - ",this.displayHighlight(u),p.a.createElement(L,{official:h.repositoryOfficial}),!1),p.a.createElement(ht.a.Body,null,p.a.createElement(P.a,null,o&&p.a.createElement(k.a,{className:"mb-3"},p.a.createElement(R.a,null,this.displayHighlight(o))),p.a.createElement("small",null,p.a.createElement(k.a,null,p.a.createElement(R.a,{lg:6},"Updated: ",lt()(h.committed).format("LLL")),p.a.createElement(R.a,{lg:6},"License: ",this.displayHighlight(c))),p.a.createElement(k.a,{className:"mb-2"},p.a.createElement(R.a,{lg:6},"Bucket:"," ",p.a.createElement("a",{href:h.repository},this.displayHighlight(l)),p.a.createElement(dt,{stars:h.stars}),p.a.createElement(L,{official:h.repositoryOfficial}),!h.repositoryOfficial&&p.a.createElement(ft,{className:"ml-1 ms copyToClipbardMiniButton",onClick:function(){return e.handleCopyToClipboard("scoop bucket add ".concat(U.extractPathFromUrl(h.repository,"_")," ").concat(h.repository))}})),p.a.createElement(R.a,{lg:6},"Commiter: ",this.displayHighlight(s))),p.a.createElement(k.a,{className:"text-center",noGutters:!0},p.a.createElement(R.a,{lg:!0,xs:4,className:"mt-1 mb-2"},p.a.createElement("a",{href:m},"Homepage ",p.a.createElement(Ge.c,null))),p.a.createElement(R.a,{lg:!0,xs:4,className:"mt-1 mb-2"},p.a.createElement("a",{href:"".concat(h.repository,"/blob/master/").concat(h.filePath)},"Manifest ",p.a.createElement(Ge.c,null))),p.a.createElement(R.a,{lg:!0,xs:4,className:"mt-1 mb-2"},p.a.createElement("a",{href:"".concat(h.repository,"/commit/").concat(h.sha)},"Commit ",p.a.createElement(Ge.c,null))),p.a.createElement(R.a,{lg:5},p.a.createElement(A.a,{size:"sm"},p.a.createElement(A.a.Prepend,null,p.a.createElement(A.a.Text,{className:"scoopCopyCommand border-right-0"},">")),p.a.createElement(N.a.Control,{className:"border-left-0",readOnly:!0,type:"text",value:"scoop install ".concat(n)}),p.a.createElement(A.a.Append,null,p.a.createElement(ft,{onClick:function(){return e.handleCopyToClipboard("scoop install ".concat(n))}})))))))))}}]),a}(m.PureComponent),yt=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).getQueryFromUri=function(){var e=n.props.location;return e.search.length>1?decodeURIComponent(e.search.substr(1)):""},n.getCurrentPageFromUri=function(){var e=n.props.match;return parseInt(e.params.page||"1",10)},n.updateHistory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=n.props,r=a.history,i=a.location;r.replace({search:null!==e&&void 0!==e?e:i.search,pathname:null!==t&&void 0!==t?t:"/apps"})},n.handleQueryChange=function(e){n.updateHistory(encodeURIComponent(e),void 0),n.setState({searchBarQuery:e,currentPage:1})},n.handleQuerySubmit=function(){var e=n.state.searchBarQuery;n.setState({query:e})},n.handleResultsChange=function(e){n.setState({searchResults:e})},n.handlePageChange=function(e){n.updateHistory(void 0,"/apps/".concat(e)),n.setState({currentPage:e})},n.handleSortChange=function(e){sessionStorage.setItem("sortIndex",e.toString()),n.setState({sortIndex:e})},n.handleSearchOfficialOnlyChange=function(e){sessionStorage.setItem("searchOfficialOnly",e.toString()),n.setState({searchOfficialOnly:e})},n.handleCopyToClipboard=function(e){n.setState({contentToCopy:e})},n.handleContentCopied=function(){n.setState({contentToCopy:void 0})};var r=parseInt(sessionStorage.getItem("sortIndex")||"0",10),i="true"===sessionStorage.getItem("searchOfficialOnly"),o=n.getQueryFromUri();return n.state={searchBarQuery:o,query:o,currentPage:n.getCurrentPageFromUri(),sortIndex:r,searchOfficialOnly:i},n}return Object(g.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.location,a=this.getQueryFromUri();e.location.search!==t.search&&this.setState({searchBarQuery:a,query:a}),e.location.pathname!==t.pathname&&this.setState({currentPage:this.getCurrentPageFromUri()})}},{key:"render",value:function(){var e,t,a=this,n=this.state,r=n.contentToCopy,i=n.searchBarQuery,o=n.query,c=n.currentPage,l=n.sortIndex,s=n.searchOfficialOnly,u=n.searchResults;return p.a.createElement("div",{className:"Search"},p.a.createElement($e,{content:r,onContentCopied:this.handleContentCopied}),p.a.createElement(P.a,{className:"mt-5 mb-5"},p.a.createElement(k.a,{className:"justify-content-center"},p.a.createElement(R.a,{sm:8},p.a.createElement(Xe,{query:i,onQueryChange:this.handleQueryChange,onSubmit:this.handleQuerySubmit}))),p.a.createElement(k.a,{className:"mt-5 mb-1"},p.a.createElement(R.a,null,p.a.createElement(ot,{resultsPerPage:20,page:c,query:o,sortIndex:l,searchOfficialOnly:s,onResultsChange:this.handleResultsChange,onSortIndexChange:this.handleSortChange,onSearchOfficialOnlyChange:this.handleSearchOfficialOnlyChange}))),p.a.createElement(k.a,null,p.a.createElement(R.a,{className:"d-flex justify-content-center"},p.a.createElement(tt,{resultsPerPage:20,currentPage:c,resultsCount:null!==(e=null===u||void 0===u?void 0:u.count)&&void 0!==e?e:0,onPageChange:this.handlePageChange}))),p.a.createElement(k.a,{className:"mt-2"},p.a.createElement(R.a,null,null===u||void 0===u?void 0:u.results.map((function(e){return p.a.createElement(gt,{key:e.id,result:e,onCopyToClipbard:a.handleCopyToClipboard})})))),p.a.createElement(k.a,null,p.a.createElement(R.a,{className:"d-flex justify-content-center"},p.a.createElement(tt,{resultsPerPage:20,currentPage:c,resultsCount:null!==(t=null===u||void 0===u?void 0:u.count)&&void 0!==t?t:0,onPageChange:this.handlePageChange})))))}}]),a}(m.PureComponent),Et=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return p.a.createElement(O.a,null,p.a.createElement(Ye,null),p.a.createElement(C.d,null,p.a.createElement(C.b,{path:"/apps/:page?",component:yt}),p.a.createElement(C.b,{path:"/buckets",component:Ve}),p.a.createElement(C.b,{path:"/"},p.a.createElement(C.a,{to:"/apps"}))))}}]),a}(m.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));b.a.render(p.a.createElement(p.a.StrictMode,null,p.a.createElement(Et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.e8926002.chunk.js.map