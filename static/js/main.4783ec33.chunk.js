(this.webpackJsonpscoopsearch=this.webpackJsonpscoopsearch||[]).push([[0],{71:function(e,t,a){e.exports=a(86)},72:function(e,t,a){},73:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(1),r=(a(72),a(7)),o=a(9),i=a(14),l=a(13),s=(a(73),a(97)),c=a(93),u=a(60),h=a(98),f=a(91),p=a(17),d=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).searchInput=void 0,o.delayBeforeSearch=void 0,o.handleChange=function(e){o.setState({query:e.target.value}),o.clearDelayBeforeSearchTimeout(),o.delayBeforeSearch=setTimeout((function(e){return o.props.onQueryChange(e)}),250,e.target.value)},o.handleSubmit=function(e){e.preventDefault(),o.props.onQueryChange(o.state.query)},o.searchInput=n.default.createRef(),o.state={query:o.props.query},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.searchInput.current.focus()}},{key:"componentWillUnmount",value:function(){this.clearDelayBeforeSearchTimeout()}},{key:"componentDidUpdate",value:function(e){e.query!==this.props.query&&this.setState({query:this.props.query})}},{key:"clearDelayBeforeSearchTimeout",value:function(){this.delayBeforeSearch&&(clearTimeout(this.delayBeforeSearch),this.delayBeforeSearch=void 0)}},{key:"render",value:function(){return n.default.createElement(h.a,{onSubmit:this.handleSubmit},n.default.createElement(f.a,null,n.default.createElement(f.a.Prepend,null,n.default.createElement(f.a.Text,null,n.default.createElement(p.e,null))),n.default.createElement(h.a.Control,{ref:this.searchInput,size:"lg",type:"text",placeholder:"Search an app",value:this.state.query,onChange:this.handleChange})))}}]),a}(n.PureComponent);d.defaultProps={query:""};var m,b,g,y,O,E,j,C,v,P,k,S,N,x,w,M,R,D,I,J,z,B,T,A,q,H,U,L,F,G,V,Q,_,W,$,K,X,Y,Z,ee,te,ae,ne,re,oe,ie,le,se,ce,ue,he,fe,pe,de,me=d,be=a(92),ge=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return this.props.searching?n.default.createElement("span",null,n.default.createElement("span",null,"Searching for matching ",this.props.type,"...")," ",n.default.createElement(be.a,{animation:"border",size:"sm",variant:"secondary"})):this.props.resultsCount?n.default.createElement("span",null,"Found ",this.props.resultsCount," ",this.props.type,this.props.query&&n.default.createElement("span",null," ","for '",n.default.createElement("strong",null,this.props.query),"'"),"."):n.default.createElement("span",null,"No result found",this.props.query&&n.default.createElement("span",null," ","for '",n.default.createElement("strong",null,this.props.query),"'"),".")}}]),a}(n.PureComponent),ye=a(10),Oe=a(11),Ee=(a(35),a(6)),je=a(68),Ce=Object(Ee.JsonConverter)(m=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"serialize",value:function(e){throw new Error("Conversion not supported")}},{key:"deserialize",value:function(e){return new Date(e)}}]),e}())||m,ve=(b=Object(Ee.JsonObject)("MetadataJson"),g=Object(Ee.JsonProperty)("Repository",String),y=Object(Ee.JsonProperty)("OfficialRepository",Boolean),O=Object(Ee.JsonProperty)("RepositoryStars",Number),E=Object(Ee.JsonProperty)("BranchName",String,!0),j=Object(Ee.JsonProperty)("FilePath",String),C=Object(Ee.JsonProperty)("AuthorName",String),v=Object(Ee.JsonProperty)("Committed",Ce),P=Object(Ee.JsonProperty)("Sha",String),b((S=function e(){Object(r.a)(this,e),Object(ye.a)(this,"repository",N,this),Object(ye.a)(this,"repositoryOfficial",x,this),Object(ye.a)(this,"stars",w,this),Object(ye.a)(this,"branchName",M,this),Object(ye.a)(this,"filePath",R,this),Object(ye.a)(this,"authorName",D,this),Object(ye.a)(this,"committed",I,this),Object(ye.a)(this,"sha",J,this)},N=Object(Oe.a)(S.prototype,"repository",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=Object(Oe.a)(S.prototype,"repositoryOfficial",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(Oe.a)(S.prototype,"stars",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=Object(Oe.a)(S.prototype,"branchName",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=Object(Oe.a)(S.prototype,"filePath",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=Object(Oe.a)(S.prototype,"authorName",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=Object(Oe.a)(S.prototype,"committed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date}}),J=Object(Oe.a)(S.prototype,"sha",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=S))||k),Pe=(z=Object(Ee.JsonObject)("ManifestJson"),B=Object(Ee.JsonProperty)("Id",String),T=Object(Ee.JsonProperty)("@search.score",Number),A=Object(Ee.JsonProperty)("Name",String),q=Object(Ee.JsonProperty)("NamePartial",String),H=Object(Ee.JsonProperty)("NameSuffix",String),U=Object(Ee.JsonProperty)("Description",String,!0),L=Object(Ee.JsonProperty)("Homepage",String,!0),F=Object(Ee.JsonProperty)("License",String,!0),G=Object(Ee.JsonProperty)("Version",String,!0),V=Object(Ee.JsonProperty)("Metadata",ve),Q=Object(Ee.JsonProperty)("@search.highlights",Ee.Any,!0),z((W=function(){function e(){Object(r.a)(this,e),Object(ye.a)(this,"id",$,this),Object(ye.a)(this,"score",K,this),Object(ye.a)(this,"name",X,this),Object(ye.a)(this,"namePartial",Y,this),Object(ye.a)(this,"nameSuffix",Z,this),Object(ye.a)(this,"description",ee,this),Object(ye.a)(this,"homepage",te,this),Object(ye.a)(this,"license",ae,this),Object(ye.a)(this,"version",ne,this),Object(ye.a)(this,"metadata",re,this),Object(ye.a)(this,"_highlights",oe,this)}return Object(o.a)(e,[{key:"tryGetHighlight",value:function(e,t){return this.tryGetHighlights([e],t)}},{key:"tryGetHighlights",value:function(e,t){var a,n=Object(je.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(this._highlights&&this._highlights[r])return this._highlights[r][0]}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"highlightedName",get:function(){return this.tryGetHighlights(["Name","NamePartial","NameSuffix"],this.name)}},{key:"highlightedLicense",get:function(){return this.tryGetHighlight("License",this.license)}},{key:"highlightedRepository",get:function(){return this.tryGetHighlight("Metadata/Repository",this.metadata.repository.replace("https://github.com/",""))}},{key:"highlightedAuthorName",get:function(){return this.tryGetHighlight("Metadata/AuthorName",this.metadata.authorName)}},{key:"highlightedDescription",get:function(){return this.tryGetHighlight("Description",this.description)}},{key:"highlightedVersion",get:function(){return this.tryGetHighlight("Version",this.version)}},{key:"favicon",get:function(){if(this.homepage){var e=document.createElement("a");return e.href=this.homepage,e.origin+"/favicon.ico"}}}]),e}(),$=Object(Oe.a)(W.prototype,"id",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=Object(Oe.a)(W.prototype,"score",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=Object(Oe.a)(W.prototype,"name",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=Object(Oe.a)(W.prototype,"namePartial",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Z=Object(Oe.a)(W.prototype,"nameSuffix",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ee=Object(Oe.a)(W.prototype,"description",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),te=Object(Oe.a)(W.prototype,"homepage",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ae=Object(Oe.a)(W.prototype,"license",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ne=Object(Oe.a)(W.prototype,"version",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),re=Object(Oe.a)(W.prototype,"metadata",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ve}}),oe=Object(Oe.a)(W.prototype,"_highlights",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=W))||_),ke=(ie=Object(Ee.JsonObject)("SearchResultsJson"),le=Object(Ee.JsonProperty)("@odata.count",Number),se=Object(Ee.JsonProperty)("value",[Pe]),ie((de=pe=function(){function e(){Object(r.a)(this,e),Object(ye.a)(this,"count",he,this),Object(ye.a)(this,"results",fe,this)}return Object(o.a)(e,null,[{key:"Create",value:function(t){return e.jsonConvert.deserializeObject(t,e)}}]),e}(),pe.jsonConvert=new Ee.JsonConvert,ue=de,he=Object(Oe.a)(ue.prototype,"count",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fe=Object(Oe.a)(ue.prototype,"results",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Array()}}),ce=ue))||ce),Se=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).abortController=new AbortController,n.sortModes=[{DisplayName:"Best match",OrderBy:["search.score() desc","Metadata/OfficialRepositoryNumber desc","NameSortable asc"]},{DisplayName:"Name",OrderBy:["NameSortable asc","Metadata/OfficialRepositoryNumber desc","Metadata/RepositoryStars desc","Metadata/Committed desc"]},{DisplayName:"Newest",OrderBy:["Metadata/Committed desc","Metadata/OfficialRepositoryNumber desc","Metadata/RepositoryStars desc"]}],n.handleSortChange=function(e){n.props.onSortIndexChange(e.target.selectedIndex)},n.state={resultsCount:void 0,searching:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchDataAsync(this.abortController.signal,this.props.query)}},{key:"componentDidUpdate",value:function(e,t){this.props.query===e.query&&this.props.page===e.page&&this.props.sortIndex===e.sortIndex||(this.abortController.abort(),this.abortController=new AbortController,this.fetchDataAsync(this.abortController.signal,this.props.query))}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"fetchDataAsync",value:function(e,t){var a=this;this.setState({searching:!0});var n="".concat("https://scoopsearch.search.windows.net/indexes/apps/docs","/search?api-version=2020-06-30");fetch(n,{method:"POST",body:JSON.stringify({count:!0,search:t.trim(),searchMode:"all",orderby:this.sortModes[this.props.sortIndex].OrderBy.join(", "),skip:(this.props.page-1)*this.props.resultsPerPage,top:this.props.resultsPerPage,select:["Id","Name","NamePartial","NameSuffix","Description","Homepage","License","Version","Metadata/Repository","Metadata/FilePath","Metadata/AuthorName","Metadata/OfficialRepository","Metadata/RepositoryStars","Metadata/Committed","Metadata/Sha"].join(","),highlight:["Name","NamePartial","NameSuffix","Description","Version","License","Metadata/Repository","Metadata/AuthorName"].join(","),highlightPreTag:"<mark>",highlightPostTag:"</mark>"}),headers:{"api-key":"DC6D2BBE65FC7313F2C52BBD2B0286ED","Content-Type":"application/json"},signal:e}).then((function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()})).then((function(e){var t=ke.Create(e);a.setState({searching:!1,resultsCount:t.count}),a.props.onResultsChange(t)})).catch((function(e){"AbortError"!==e.name&&(a.setState({searching:!1,resultsCount:void 0}),a.props.onResultsChange(void 0),console.error(e))}))}},{key:"render",value:function(){return n.default.createElement(h.a,null,n.default.createElement(c.a,null,n.default.createElement(u.a,{className:"my-auto"},n.default.createElement(ge,{query:this.props.query,resultsCount:this.state.resultsCount,searching:this.state.searching,type:"applications"})),n.default.createElement(u.a,{lg:3},n.default.createElement(f.a,{size:"sm"},n.default.createElement(f.a.Prepend,null,n.default.createElement(f.a.Text,null,"Sort by")),n.default.createElement(h.a.Control,{as:"select",size:"sm",custom:!0,value:this.props.sortIndex,onChange:this.handleSortChange},this.sortModes.map((function(e,t){return n.default.createElement("option",{key:t,value:t},e.DisplayName)})))))))}}]),a}(n.PureComponent),Ne=a(103),xe=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).changePage=function(t){var a=Math.ceil(e.props.resultsCount/e.props.resultsPerPage);t=Math.max(1,Math.min(t,a)),e.props.onPageChange(t)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentPage,r=t.resultsCount,o=t.resultsPerPage;if(r){var i=Math.ceil(r/o);if(i>1){var l=[],s=Math.max(2,a-2),c=Math.min(i-1,a+2),u=4-(c-s),h=c-(c+u);c=Math.min(i-1,c+u);for(var f=function(t){t===a-2+h||t===a+2+u?l.push(n.default.createElement(Ne.a.Ellipsis,{key:t,disabled:!0})):l.push(n.default.createElement(Ne.a.Item,{key:t,active:t===a,onClick:function(){return e.changePage(t)}},t))},p=s=Math.max(2,s+h);p<=c;p++)f(p);return n.default.createElement(Ne.a,{size:"sm"},n.default.createElement(Ne.a.Prev,{key:"prev",onClick:function(){return e.changePage(a-1)}}),n.default.createElement(Ne.a.Item,{key:1,active:1===a,onClick:function(){return e.changePage(1)}},1),l,n.default.createElement(Ne.a.Item,{key:i,active:i===a,onClick:function(){return e.changePage(i)}},i),n.default.createElement(Ne.a.Next,{key:"next",onClick:function(){return e.changePage(a+1)}}))}}return null}}]),a}(n.PureComponent),we=a(102),Me=a(48),Re=a.n(Me),De=a(61),Ie=a.n(De),Je=a(62),ze=a(94),Be=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleClick=function(e){n.props.onClick(),n.setState({copied:!0})},n.state={copied:!1},n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.copied&&this.state.copied!==t.copied&&setTimeout((function(){a.setState({copied:!1})}),1500)}},{key:"render",value:function(){return n.default.createElement(ze.a,{className:this.props.className,variant:"secondary",onClick:this.handleClick,disabled:this.state.copied},this.state.copied?n.default.createElement(p.a,{className:"faIconVerticalAlign"}):n.default.createElement(p.b,{className:"faIconVerticalAlign"}))}}]),a}(n.PureComponent),Te=a(100),Ae=a(95),qe=a(63),He=function(){return n.default.createElement(Te.a,{placement:"auto",delay:250,overlay:n.default.createElement(Ae.a,{id:"tooltip"},"Well known bucket")},n.default.createElement(qe.a,{className:"ml-1 faIconVerticalAlign",color:"#2E86C1"}))},Ue=a(96),Le=function(e){return n.default.createElement(Ue.a,{variant:"secondary",className:"ml-1 starsBadge"},n.default.createElement("span",null,e.stars)," ",n.default.createElement(p.f,null))},Fe=function e(){Object(r.a)(this,e)};Fe.extractPathFromUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return e.split("/").slice(-2).join(t)},Re.a.extend(Ie.a);var Ge,Ve,Qe,_e,We,$e,Ke,Xe,Ye,Ze=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).handleCopyToClipboard=function(t){e.props.onCopyToClipbard(t)},e.displayHighlight=function(e){return e&&n.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.result,a=t.id,r=(t.score,t.name),o=t.favicon,i=t.highlightedName,l=t.highlightedDescription,d=t.highlightedLicense,m=t.highlightedRepository,b=t.highlightedAuthorName,g=t.highlightedVersion,y=t.metadata,O=t.homepage;return n.default.createElement(we.a,{key:a,className:"mb-2"},n.default.createElement(we.a.Header,null,o&&n.default.createElement(Je.Img,{className:"mr-2",src:o,width:20,height:20}),n.default.createElement("strong",null,this.displayHighlight(i))," - ",this.displayHighlight(g),y.repositoryOfficial&&n.default.createElement(He,null),!1),n.default.createElement(we.a.Body,null,n.default.createElement(s.a,null,l&&n.default.createElement(c.a,{className:"mb-3"},n.default.createElement(u.a,null,this.displayHighlight(l))),n.default.createElement("small",null,n.default.createElement(c.a,null,n.default.createElement(u.a,{lg:6},"Updated: ",Re()(y.committed).format("LLL")),n.default.createElement(u.a,{lg:6},"License: ",this.displayHighlight(d))),n.default.createElement(c.a,{className:"mb-2"},n.default.createElement(u.a,{lg:6},"Bucket:"," ",n.default.createElement("a",{href:y.repository},this.displayHighlight(m)),n.default.createElement(Le,{stars:y.stars}),y.repositoryOfficial&&n.default.createElement(He,null),!y.repositoryOfficial&&n.default.createElement(Be,{className:"ml-1 ms copyToClipbardMiniButton",onClick:function(){return e.handleCopyToClipboard("scoop bucket add ".concat(Fe.extractPathFromUrl(y.repository,"_")," ").concat(y.repository))}})),n.default.createElement(u.a,{lg:6},"Commiter: ",this.displayHighlight(b))),n.default.createElement(c.a,{className:"text-center",noGutters:!0},n.default.createElement(u.a,{lg:!0,xs:4,className:"mt-1 mb-2"},n.default.createElement("a",{href:O},"Homepage ",n.default.createElement(p.c,null))),n.default.createElement(u.a,{lg:!0,xs:4,className:"mt-1 mb-2"},n.default.createElement("a",{href:"".concat(y.repository,"/blob/master/").concat(y.filePath)},"Manifest ",n.default.createElement(p.c,null))),n.default.createElement(u.a,{lg:!0,xs:4,className:"mt-1 mb-2"},n.default.createElement("a",{href:"".concat(y.repository,"/commit/").concat(y.sha)},"Commit ",n.default.createElement(p.c,null))),n.default.createElement(u.a,{lg:5},n.default.createElement(f.a,{size:"sm"},n.default.createElement(f.a.Prepend,null,n.default.createElement(f.a.Text,{className:"scoopCopyCommand border-right-0"},">")),n.default.createElement(h.a.Control,{className:"border-left-0",readOnly:!0,type:"text",value:"scoop install ".concat(r)}),n.default.createElement(f.a.Append,null,n.default.createElement(Be,{onClick:function(){return e.handleCopyToClipboard("scoop install ".concat(r))}})))))))))}}]),a}(n.PureComponent),et=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).textAreaRef=n.default.createRef(),e}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){if(this.props.content){var e=this.textAreaRef.current;e.value=this.props.content,e.select(),document.execCommand("copy"),e.blur(),this.props.onContentCopied()}}},{key:"render",value:function(){return n.default.createElement("textarea",{ref:this.textAreaRef,readOnly:!0,style:{position:"absolute",left:-9999}})}}]),a}(n.PureComponent),tt=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var n;Object(r.a)(this,a),(n=t.call(this,e)).getCurrentQuery=function(){return n.props.location.search.length>1?decodeURIComponent(n.props.location.search.substr(1)):""},n.getCurrentPage=function(){return parseInt(n.props.match.params.page||"1")},n.handleQueryChange=function(e){n.props.history.replace({search:encodeURIComponent(e),pathname:"/apps"}),n.setState({query:e,currentPage:1})},n.handleResultsChange=function(e){n.setState({searchResults:e})},n.handlePageChange=function(e){n.props.history.replace({pathname:"/apps/".concat(e),search:n.props.location.search}),n.setState({currentPage:e})},n.handleSortChange=function(e){sessionStorage.setItem("sortIndex",e.toString()),n.setState({sortIndex:e})},n.handleCopyToClipboard=function(e){n.setState({contentToCopy:e})},n.handleContentCopied=function(){n.setState({contentToCopy:void 0})};var o=parseInt(sessionStorage.getItem("sortIndex")||"0");return n.state={query:n.getCurrentQuery(),currentPage:n.getCurrentPage(),sortIndex:o},n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e){e.location.search!==this.props.location.search&&this.setState({query:this.getCurrentQuery()}),e.location.pathname!==this.props.location.pathname&&this.setState({currentPage:this.getCurrentPage()})}},{key:"render",value:function(){var e,t,a,r=this;return n.default.createElement("div",{className:"Search"},n.default.createElement(et,{content:this.state.contentToCopy,onContentCopied:this.handleContentCopied}),n.default.createElement(s.a,{className:"mt-5 mb-5"},n.default.createElement(c.a,{className:"justify-content-center"},n.default.createElement(u.a,{sm:8},n.default.createElement(me,{query:this.state.query,onQueryChange:this.handleQueryChange}))),n.default.createElement(c.a,{className:"mt-5 mb-1"},n.default.createElement(u.a,null,n.default.createElement(Se,{resultsPerPage:20,page:this.state.currentPage,query:this.state.query,sortIndex:this.state.sortIndex,onResultsChange:this.handleResultsChange,onSortIndexChange:this.handleSortChange}))),n.default.createElement(c.a,null,n.default.createElement(u.a,{className:"d-flex justify-content-center"},n.default.createElement(xe,{resultsPerPage:20,currentPage:this.state.currentPage,resultsCount:null===(e=this.state.searchResults)||void 0===e?void 0:e.count,onPageChange:this.handlePageChange}))),n.default.createElement(c.a,{className:"mt-2"},n.default.createElement(u.a,null,null===(t=this.state.searchResults)||void 0===t?void 0:t.results.map((function(e){return n.default.createElement(Ze,{key:e.id,result:e,onCopyToClipbard:r.handleCopyToClipboard})})))),n.default.createElement(c.a,null,n.default.createElement(u.a,{className:"d-flex justify-content-center"},n.default.createElement(xe,{resultsPerPage:20,currentPage:this.state.currentPage,resultsCount:null===(a=this.state.searchResults)||void 0===a?void 0:a.count,onPageChange:this.handlePageChange})))))}}]),a}(n.PureComponent),at=a(33),nt=a.n(at),rt=a(52),ot=a(64),it=a(24),lt=(Ge=Object(Ee.JsonObject)("BucketsResultsJson"),Ve=Object(Ee.JsonProperty)("@odata.count",Number),Qe=Object(Ee.JsonProperty)("@search.facets"),Ge((Ye=Xe=function(){function e(){Object(r.a)(this,e),Object(ye.a)(this,"count",$e,this),Object(ye.a)(this,"results",Ke,this)}return Object(o.a)(e,null,[{key:"Create",value:function(t){return e.jsonConvert.deserializeObject(t,e)}}]),e}(),Xe.jsonConvert=new Ee.JsonConvert,We=Ye,$e=Object(Oe.a)(We.prototype,"count",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ke=Object(Oe.a)(We.prototype,"results",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_e=We))||_e),st=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).abortController=new AbortController,n.sortModes=["Default","Name","Manifests"],n.handleSortChange=function(e){var t=e.target.selectedIndex;n.setState({sortIndex:t,results:n.sortResults(n.state.results,t)})},n.state={searching:!1,sortIndex:0,results:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(rt.a)(nt.a.mark((function e(){var t,a,n;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({searching:!0,results:[]}),e.next=3,this.fetchDataAsync(this.abortController.signal,!0);case 3:return t=e.sent,e.next=6,this.fetchDataAsync(this.abortController.signal,!1);case 6:a=e.sent,n=t.results["Metadata/Repository"].map((function(e){return{bucket:e.value,manifests:e.count,official:!0}})).concat(a.results["Metadata/Repository"].map((function(e){return{bucket:e.value,manifests:e.count,official:!1}}))),n=this.sortResults(n,this.state.sortIndex),this.setState({searching:!1,results:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"fetchDataAsync",value:function(){var e=Object(rt.a)(nt.a.mark((function e(t,a){var n,r,o;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://scoopsearch.search.windows.net/indexes/apps/docs","/search?api-version=2020-06-30"),e.next=3,fetch(n,{method:"POST",body:JSON.stringify({count:!0,facets:["Metadata/Repository,count:10000"],filter:"Metadata/OfficialRepositoryNumber eq ".concat(a?"1":"0"),top:0}),headers:{"api-key":"DC6D2BBE65FC7313F2C52BBD2B0286ED","Content-Type":"application/json"},signal:t});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",lt.Create(o));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sortResults",value:function(e,t){switch(t){case 0:return e.sort((function(e,t){return e.official===t.official?e.bucket.localeCompare(t.bucket):e.official<t.official?1:-1}));case 1:return e.sort((function(e,t){return e.bucket.localeCompare(t.bucket)}));case 2:return e.sort((function(e,t){return e.manifests===t.manifests?0:e.manifests<t.manifests?1:-1}));default:throw new Error("Unexpected sort")}}},{key:"render",value:function(){return n.default.createElement(n.default.Fragment,null,n.default.createElement(s.a,{className:"mt-5 mb-5"},n.default.createElement(c.a,null,n.default.createElement(u.a,{className:"my-auto"},n.default.createElement(ge,{resultsCount:this.state.results.length,searching:this.state.searching,type:"buckets"})),n.default.createElement(u.a,{lg:3},n.default.createElement(f.a,{size:"sm"},n.default.createElement(f.a.Prepend,null,n.default.createElement(f.a.Text,null,"Sort by")),n.default.createElement(h.a.Control,{as:"select",size:"sm",custom:!0,onChange:this.handleSortChange},this.sortModes.map((function(e,t){return n.default.createElement("option",{key:t,value:t},e)})))))),this.state.results&&n.default.createElement(c.a,{className:"mt-2"},n.default.createElement(u.a,null,n.default.createElement(ot.a,{striped:!0,bordered:!0,hover:!0},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",null,"Bucket"),n.default.createElement("th",null,"Manifests"))),n.default.createElement("tbody",null,this.state.results.map((function(e){return n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(it.b,{to:{pathname:"/apps",search:encodeURIComponent('"'.concat(e.bucket,'"'))}},Fe.extractPathFromUrl(e.bucket))," ",e.official&&n.default.createElement(He,null)),n.default.createElement("td",null,e.manifests))}))))))))}}]),a}(n.PureComponent),ct=a(15),ut=a(101),ht=a(99),ft=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.default.createElement(ut.a,{expand:"sm",bg:"dark",variant:"dark"},n.default.createElement(ut.a.Brand,{as:it.b,to:"/"},"ScoopSearch"),n.default.createElement(ut.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),n.default.createElement(ut.a.Collapse,{id:"responsive-navbar-nav"},n.default.createElement(ht.a,{className:"mr-auto"},n.default.createElement(ht.a.Link,{as:it.b,to:"/apps"},"Apps"),n.default.createElement(ht.a.Link,{as:it.b,to:"/buckets"},"Buckets")),n.default.createElement(ht.a,null,n.default.createElement(ht.a.Link,{href:"https://github.com/ScoopSearch"},n.default.createElement(p.d,{size:"1.2em"})))))}}]),a}(n.PureComponent),pt=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.default.createElement(it.a,null,n.default.createElement(ft,null),n.default.createElement(ct.d,null,n.default.createElement(ct.b,{path:"/apps/:page?",component:tt}),n.default.createElement(ct.b,{path:"/buckets",component:st}),n.default.createElement(ct.b,{path:"/"},n.default.createElement(ct.a,{to:"/apps"}))))}}]),a}(n.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.default.render(n.default.createElement(n.default.StrictMode,null,n.default.createElement(pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.4783ec33.chunk.js.map