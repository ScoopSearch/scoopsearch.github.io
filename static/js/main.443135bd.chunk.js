(this.webpackJsonpscoopsearch=this.webpackJsonpscoopsearch||[]).push([[0],{47:function(e,t,a){e.exports=a(62)},52:function(e,t,a){},55:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(22),o=a.n(i),s=(a(52),a(7)),c=a(10),l=a(13),u=a(12),h=a(46),m=(a(55),a(70)),p=a(71),g=a(15),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{expand:"sm",bg:"dark",variant:"dark"},r.a.createElement(m.a.Brand,{href:"#home"},"ScoopSearch"),r.a.createElement(m.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(p.a.Link,{href:"#apps"},"Apps"),r.a.createElement(p.a.Link,{href:"#buckets"},"Buckets")),r.a.createElement(p.a,null,r.a.createElement(p.a.Link,{href:"https://github.com/ScoopSearch"},r.a.createElement(g.d,{size:"1.2em"})))))}}]),a}(n.PureComponent),b=a(69),f=a(64),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).searchInput=void 0,n.delayBeforeSearch=void 0,n.handleChange=function(e){n.setState({query:e.target.value}),n.clearDelayBeforeSearchTimeout(),n.delayBeforeSearch=setTimeout((function(e){return n.props.onQueryChange(e)}),250,e.target.value)},n.handleSubmit=function(e){e.preventDefault(),n.props.onQueryChange(n.state.query)},n.searchInput=r.a.createRef(),n.state={query:n.props.query},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.searchInput.current.focus()}},{key:"componentWillUnmount",value:function(){this.clearDelayBeforeSearchTimeout()}},{key:"clearDelayBeforeSearchTimeout",value:function(){this.delayBeforeSearch&&(clearTimeout(this.delayBeforeSearch),this.delayBeforeSearch=void 0)}},{key:"render",value:function(){return r.a.createElement(b.a,{onSubmit:this.handleSubmit},r.a.createElement(f.a,null,r.a.createElement(f.a.Prepend,null,r.a.createElement(f.a.Text,null,r.a.createElement(g.e,null))),r.a.createElement(b.a.Control,{ref:this.searchInput,size:"lg",type:"text",placeholder:"Search an app",value:this.state.query,onChange:this.handleChange})))}}]),a}(n.PureComponent);y.defaultProps={query:""};var O,E,j,v,C,P,S,k,N,w,I,M,x,z,J,D,B,R,q,A,H,T,L,V,G,_,U,F,Q,W,$,K,X,Y,Z,ee,te,ae,ne,re,ie,oe,se,ce,le,ue,he,me,pe=y,ge=a(67),de=a(66),be=a(43),fe=a(65),ye=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return this.props.searching?r.a.createElement("span",null,r.a.createElement("span",null,"Searching for matching applications...")," ",r.a.createElement(fe.a,{animation:"border",size:"sm",variant:"secondary"})):this.props.resultsCount?r.a.createElement("span",null,"Found ",this.props.resultsCount," applications",this.props.query&&r.a.createElement("span",null," ","for '",r.a.createElement("strong",null,this.props.query),"'"),"."):r.a.createElement("span",null,"No result found for '",r.a.createElement("strong",null,this.props.query),"'")}}]),a}(n.PureComponent),Oe=a(8),Ee=a(9),je=(a(30),a(6)),ve=Object(je.JsonConverter)(O=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"serialize",value:function(e){throw new Error("Conversion not supported")}},{key:"deserialize",value:function(e){return new Date(e)}}]),e}())||O,Ce=(E=Object(je.JsonObject)("MetadataJson"),j=Object(je.JsonProperty)("Repository",String),v=Object(je.JsonProperty)("OfficialRepository",Boolean),C=Object(je.JsonProperty)("BranchName",String,!0),P=Object(je.JsonProperty)("FilePath",String),S=Object(je.JsonProperty)("AuthorName",String),k=Object(je.JsonProperty)("Committed",ve),N=Object(je.JsonProperty)("Sha",String),E((I=function e(){Object(s.a)(this,e),Object(Oe.a)(this,"repository",M,this),Object(Oe.a)(this,"repositoryOfficial",x,this),Object(Oe.a)(this,"branchName",z,this),Object(Oe.a)(this,"filePath",J,this),Object(Oe.a)(this,"authorName",D,this),Object(Oe.a)(this,"committed",B,this),Object(Oe.a)(this,"sha",R,this)},M=Object(Ee.a)(I.prototype,"repository",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=Object(Ee.a)(I.prototype,"repositoryOfficial",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=Object(Ee.a)(I.prototype,"branchName",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),J=Object(Ee.a)(I.prototype,"filePath",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=Object(Ee.a)(I.prototype,"authorName",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=Object(Ee.a)(I.prototype,"committed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date}}),R=Object(Ee.a)(I.prototype,"sha",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=I))||w),Pe=(q=Object(je.JsonObject)("ManifestJson"),A=Object(je.JsonProperty)("Id",String),H=Object(je.JsonProperty)("@search.score",Number),T=Object(je.JsonProperty)("Name",String),L=Object(je.JsonProperty)("Description",String,!0),V=Object(je.JsonProperty)("Homepage",String,!0),G=Object(je.JsonProperty)("License",String,!0),_=Object(je.JsonProperty)("Version",String,!0),U=Object(je.JsonProperty)("Metadata",Ce),F=Object(je.JsonProperty)("@search.highlights",je.Any,!0),q((W=function(){function e(){Object(s.a)(this,e),Object(Oe.a)(this,"id",$,this),Object(Oe.a)(this,"score",K,this),Object(Oe.a)(this,"name",X,this),Object(Oe.a)(this,"description",Y,this),Object(Oe.a)(this,"homepage",Z,this),Object(Oe.a)(this,"license",ee,this),Object(Oe.a)(this,"version",te,this),Object(Oe.a)(this,"metadata",ae,this),Object(Oe.a)(this,"_highlights",ne,this)}return Object(c.a)(e,[{key:"tryGetHighlight",value:function(e,t){return this._highlights&&this._highlights[e]?this._highlights[e][0]:t}},{key:"highlightedName",get:function(){return this.tryGetHighlight("Name",this.name)}},{key:"highlightedLicense",get:function(){return this.tryGetHighlight("License",this.license)}},{key:"highlightedRepository",get:function(){return this.tryGetHighlight("Metadata/Repository",this.metadata.repository.replace("https://github.com/",""))}},{key:"highlightedAuthorName",get:function(){return this.tryGetHighlight("Metadata/AuthorName",this.metadata.authorName)}},{key:"highlightedDescription",get:function(){return this.tryGetHighlight("Description",this.description)}},{key:"highlightedVersion",get:function(){return this.tryGetHighlight("Version",this.version)}},{key:"favicon",get:function(){if(this.homepage){var e=document.createElement("a");return e.href=this.homepage,e.origin+"/favicon.ico"}}}]),e}(),$=Object(Ee.a)(W.prototype,"id",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=Object(Ee.a)(W.prototype,"score",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=Object(Ee.a)(W.prototype,"name",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=Object(Ee.a)(W.prototype,"description",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Z=Object(Ee.a)(W.prototype,"homepage",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ee=Object(Ee.a)(W.prototype,"license",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),te=Object(Ee.a)(W.prototype,"version",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ae=Object(Ee.a)(W.prototype,"metadata",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Ce}}),ne=Object(Ee.a)(W.prototype,"_highlights",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Q=W))||Q),Se=(re=Object(je.JsonObject)("SearchResultsJson"),ie=Object(je.JsonProperty)("@odata.count",Number),oe=Object(je.JsonProperty)("value",[Pe]),re((me=he=function(){function e(){Object(s.a)(this,e),Object(Oe.a)(this,"count",le,this),Object(Oe.a)(this,"results",ue,this)}return Object(c.a)(e,null,[{key:"Create",value:function(t){return e.jsonConvert.deserializeObject(t,e)}}]),e}(),he.jsonConvert=new je.JsonConvert,ce=me,le=Object(Ee.a)(ce.prototype,"count",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=Object(Ee.a)(ce.prototype,"results",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Array()}}),se=ce))||se),ke=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).abortController=new AbortController,n.sortModes=[{DisplayName:"Best match",OrderBy:["search.score() desc","Metadata/OfficialRepositoryNumber desc","NameNormalized asc"]},{DisplayName:"Name",OrderBy:["NameNormalized asc","Metadata/OfficialRepositoryNumber desc","Metadata/RepositoryStars desc","Metadata/Committed desc"]},{DisplayName:"Newest",OrderBy:["Metadata/Committed desc","Metadata/OfficialRepositoryNumber desc","Metadata/RepositoryStars desc"]}],n.handleSortChange=function(e){n.props.onSortIndexChange(e.target.selectedIndex)},n.state={resultsCount:void 0,searching:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fetchDataAsync(this.abortController.signal,this.props.query)}},{key:"componentDidUpdate",value:function(e,t){this.props.query===e.query&&this.props.page===e.page&&this.props.sortIndex===e.sortIndex||(this.abortController.abort(),this.abortController=new AbortController,this.fetchDataAsync(this.abortController.signal,this.props.query))}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"fetchDataAsync",value:function(e,t){var a=this;this.setState({searching:!0});var n="".concat("https://scoopsearch.search.windows.net/indexes/apps/docs","/search?api-version=2020-06-30"),r=t.trim().split(" ").map((function(e){return"".concat(e,"*")})).join(" ");fetch(n,{method:"POST",body:JSON.stringify({count:!0,search:r,orderby:this.sortModes[this.props.sortIndex].OrderBy.join(", "),skip:(this.props.page-1)*this.props.resultsPerPage,top:this.props.resultsPerPage,select:["Id","Name","Description","Homepage","License","Version","Metadata/Repository","Metadata/FilePath","Metadata/AuthorName","Metadata/OfficialRepository","Metadata/Committed","Metadata/Sha"].join(","),highlight:["Name","Description","Version","License","Metadata/Repository","Metadata/AuthorName"].join(","),highlightPreTag:"<mark>",highlightPostTag:"</mark>"}),headers:{"api-key":"DC6D2BBE65FC7313F2C52BBD2B0286ED","Content-Type":"application/json"},signal:e}).then((function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()})).then((function(e){var t=Se.Create(e);a.setState({searching:!1,resultsCount:t.count}),a.props.onResultsChange(t)})).catch((function(e){"AbortError"!==e.name&&(a.setState({searching:!1,resultsCount:void 0}),a.props.onResultsChange(void 0),console.error(e))}))}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(de.a,null,r.a.createElement(be.a,{className:"my-auto"},r.a.createElement(ye,{query:this.props.query,resultsCount:this.state.resultsCount,searching:this.state.searching})),r.a.createElement(be.a,{lg:3},r.a.createElement(f.a,{size:"sm"},r.a.createElement(f.a.Prepend,null,r.a.createElement(f.a.Text,null,"Sort by")),r.a.createElement(b.a.Control,{as:"select",size:"sm",custom:!0,value:this.props.sortIndex,onChange:this.handleSortChange},this.sortModes.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.DisplayName)})))))))}}]),a}(n.PureComponent),Ne=a(73),we=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).changePage=function(t){var a=Math.ceil(e.props.resultsCount/e.props.resultsPerPage);t=Math.max(1,Math.min(t,a)),e.props.onPageChange(t)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentPage,n=t.resultsCount,i=t.resultsPerPage;if(n){var o=Math.ceil(n/i);if(o>1){for(var s=[],c=function(t){t===a-2&&s.push(r.a.createElement(Ne.a.Ellipsis,{key:"ellipsis-before",disabled:!0})),s.push(r.a.createElement(Ne.a.Item,{key:t,active:t===a,onClick:function(){return e.changePage(t)}},t)),t===a+2&&s.push(r.a.createElement(Ne.a.Ellipsis,{key:"ellipsis-after",disabled:!0}))},l=Math.max(2,a-2);l<=Math.min(o-1,a+2);l++)c(l);return r.a.createElement(Ne.a,{size:"sm"},r.a.createElement(Ne.a.Prev,{key:"prev",onClick:function(){return e.changePage(a-1)}}),r.a.createElement(Ne.a.Item,{key:1,active:1===a,onClick:function(){return e.changePage(1)}},1),s,r.a.createElement(Ne.a.Item,{key:o,active:o===a,onClick:function(){return e.changePage(o)}},o),r.a.createElement(Ne.a.Next,{key:"next",onClick:function(){return e.changePage(a+1)}}))}}return null}}]),a}(n.PureComponent),Ie=a(72),Me=a(68),xe=a(44),ze=a.n(xe),Je=a(45),De=a(33),Be=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).commandInput=void 0,n.handleCopyClick=function(e){var t=n.commandInput.current;t.select(),document.execCommand("copy"),t.selectionEnd=t.selectionStart,t.blur(),n.setState({copied:!0})},n.displayHighlight=function(e){return e&&r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},n.state={copied:!1},n.commandInput=r.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.copied&&this.state.copied!==t.copied&&setTimeout((function(){a.setState({copied:!1})}),500)}},{key:"render",value:function(){var e=this.props.result,t=e.id,a=(e.score,e.name),n=e.favicon,i=e.highlightedName,o=e.highlightedDescription,s=e.highlightedLicense,c=e.highlightedRepository,l=e.highlightedAuthorName,u=e.highlightedVersion,h=e.metadata,m=e.homepage;return r.a.createElement(Ie.a,{key:t,className:"mb-2"},r.a.createElement(Ie.a.Header,null,n&&r.a.createElement(Je.Img,{className:"mr-2",src:n,width:20,height:20}),r.a.createElement("strong",null,this.displayHighlight(i))," - ",this.displayHighlight(u),h.repositoryOfficial&&r.a.createElement(De.a,{className:"ml-2 faIconVerticalAlign",color:"#2E86C1"}),!1),r.a.createElement(Ie.a.Body,null,r.a.createElement(ge.a,null,o&&r.a.createElement(de.a,{className:"mb-3"},r.a.createElement(be.a,null,this.displayHighlight(o))),r.a.createElement("small",null,r.a.createElement(de.a,null,r.a.createElement(be.a,{lg:6},"Updated: ",ze()(h.committed).calendar()),r.a.createElement(be.a,{lg:6},"License: ",this.displayHighlight(s))),r.a.createElement(de.a,{className:"mb-2"},r.a.createElement(be.a,{lg:6},"Bucket:"," ",r.a.createElement("a",{href:h.repository},this.displayHighlight(c)),h.repositoryOfficial&&r.a.createElement(De.a,{className:"ml-1",color:"#2E86C1"})),r.a.createElement(be.a,{lg:6},"Commiter: ",this.displayHighlight(l))),r.a.createElement(de.a,{className:"text-center",noGutters:!0},r.a.createElement(be.a,{lg:!0,xs:4,className:"mt-1 mb-2"},r.a.createElement("a",{href:m},"Homepage ",r.a.createElement(g.c,null))),r.a.createElement(be.a,{lg:!0,xs:4,className:"mt-1 mb-2"},r.a.createElement("a",{href:"".concat(h.repository,"/blob/master/").concat(h.filePath)},"Manifest ",r.a.createElement(g.c,null))),r.a.createElement(be.a,{lg:!0,xs:4,className:"mt-1 mb-2"},r.a.createElement("a",{href:"".concat(h.repository,"/commit/").concat(h.sha)},"Commit ",r.a.createElement(g.c,null))),r.a.createElement(be.a,{lg:5},r.a.createElement(f.a,{size:"sm"},r.a.createElement(f.a.Prepend,null,r.a.createElement(f.a.Text,{className:"prompt border-right-0"},">")),r.a.createElement(b.a.Control,{ref:this.commandInput,className:"border-left-0",readOnly:!0,type:"text",value:"scoop install ".concat(a)}),document.queryCommandSupported("copy")&&r.a.createElement(f.a.Append,null,r.a.createElement(Me.a,{variant:"secondary",onClick:this.handleCopyClick,disabled:this.state.copied},this.state.copied?r.a.createElement(g.a,{className:"faIconVerticalAlign"}):r.a.createElement(g.b,{className:"faIconVerticalAlign"}))))))))))}}]),a}(n.Component),Re=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).handleQueryChange=function(e){sessionStorage.setItem("query",e),n.setState({query:e,currentPage:1})},n.handleResultsChange=function(e){n.setState({searchResults:e})},n.handlePageChange=function(e){sessionStorage.setItem("currentPage",e.toString()),n.setState({currentPage:e})},n.handleSortChange=function(e){sessionStorage.setItem("sortIndex",e.toString()),n.setState({sortIndex:e})},h.a.initialize("UA-171643529-1");var r=sessionStorage.getItem("query")||"",i=parseInt(sessionStorage.getItem("currentPage")||"1"),o=parseInt(sessionStorage.getItem("sortIndex")||"0");return n.state={query:r,currentPage:i,sortIndex:o},n}return Object(c.a)(a,[{key:"render",value:function(){var e,t,a;return r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(ge.a,{className:"mt-5 mb-5"},r.a.createElement(de.a,{className:"justify-content-center"},r.a.createElement(be.a,{sm:8},r.a.createElement(pe,{query:this.state.query,onQueryChange:this.handleQueryChange}))),r.a.createElement(de.a,{className:"mt-5 mb-1"},r.a.createElement(be.a,null,r.a.createElement(ke,{resultsPerPage:20,page:this.state.currentPage,query:this.state.query,sortIndex:this.state.sortIndex,onResultsChange:this.handleResultsChange,onSortIndexChange:this.handleSortChange}))),r.a.createElement(de.a,null,r.a.createElement(be.a,{className:"d-flex justify-content-center"},r.a.createElement(we,{resultsPerPage:20,currentPage:this.state.currentPage,resultsCount:null===(e=this.state.searchResults)||void 0===e?void 0:e.count,onPageChange:this.handlePageChange}))),r.a.createElement(de.a,{className:"mt-2"},r.a.createElement(be.a,null,null===(t=this.state.searchResults)||void 0===t?void 0:t.results.map((function(e){return r.a.createElement(Be,{key:e.id,result:e})})))),r.a.createElement(de.a,null,r.a.createElement(be.a,{className:"d-flex justify-content-center"},r.a.createElement(we,{resultsPerPage:20,currentPage:this.state.currentPage,resultsCount:null===(a=this.state.searchResults)||void 0===a?void 0:a.count,onPageChange:this.handlePageChange})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.443135bd.chunk.js.map